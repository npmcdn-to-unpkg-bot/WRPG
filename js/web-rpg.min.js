/*! web-rpg 2016-08-22 */
"use strict";function Skill(){}function Class(){}function ClassTree(){}function Equipment(){}function Character(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.character_id=a,this.character_name=b,this.character_race=c,this.character_level=d,this.character_health=e,this.character_max_health=e,this.character_energy=f,this.character_max_engery=f,this.character_mana=g,this.chracter_max_mana=g,this.character_strength=h,this.character_agility=i,this.character_intelligence=j,this.character_charisma=k,this.character_luck=l,this.initiative=0,this.posx=m,this.posy=n}function Roster(a,b){this.roster_id=a,this.characters=b}function BoardCell(a,b,c,d){this.contents=a,this.terrain=b,this.xcoor=c,this.ycoor=d}function BattleBoard(a,b){this.dimX=a,this.dimY=b,this.createBlankBoard()}function Battle(a,b,c){this.board=a,this.rosters=b,this.currentTurn=c,this.phases=["Standby","Move","Act","End"],this.currentPhase=0}function detectClick(a){var b=a.dataset.xpos,c=a.dataset.ypos;alert("Cell clicked \n X-Coor: "+b+"\n Y-Coor: "+c)}function addElement(a,b,c){var d=document.createElement("div");d.setAttribute("class",b),d.innerHTML=a,document.getElementById(c).appendChild(d)}function clearElement(a){document.getElementById(a).innerHTML=""}Character.prototype.print=function(){console.log("Hi, my name is "+this.character_name+"!")},Roster.prototype.addCharacter=function(a){this.characters.push(a)},Roster.prototype.removeCharacter=function(a){var b=this.characters.indexOf(a);b>-1&&this.characters.splice(b,1)},BattleBoard.prototype.createBlankBoard=function(){for(var a=[],b=0;b<this.dimX;b++){for(var c=[],d=0;d<this.dimY;d++)c.push(new BoardCell("E","Grass",b,d));a.push(c)}this.board_cells=a},BattleBoard.prototype.getContentsAt=function(a,b){return this.board_cells[a][b]},BattleBoard.prototype.emptySpace=function(a,b){return"E"===this.board_cells[b][a].contents},BattleBoard.prototype.clearSpace=function(a,b){this.board_cells[b][a].contents="E"},BattleBoard.prototype.placeCharacter=function(a){var b=a.posx,c=a.posy;this.emptySpace(b,c)?this.board_cells[c][b].contents=a.character_id:console.log("Error: There is already a person or object in this spot!")},BattleBoard.prototype.print=function(){var a=this.board_cells;for(x=0;x<this.dimX;x++){var b="";for(y=0;y<this.dimY;y++)b+=a[x][y];console.log(b)}},BattleBoard.prototype.moveCharacter=function(a,b,c){var d=a.posx,e=a.posy;this.emptySpace(d+b,e+c)&&(this.clearSpace(d,e),a.posx+=b,a.posy+=c,this.placeCharacter(a))},BattleBoard.prototype.generateHTML=function(){for(var a="",b=100/this.dimX+"%",c=0;c<this.dimX;c++){a+='<div class="row">';for(var d=0;d<this.dimY;d++){var e=this.getContentsAt(c,d).contents;a+='<div class="cell" data-xpos="'+d+'" data-ypos="'+c+'" onclick="detectClick(this)" style="width: '+b+'"><div class="contents">'+e+"</div></div>"}a+="</div>"}return a},Battle.prototype.advancePhase=function(){var a=this.phases.length-1;this.currentPhase==a?this.currentPhase=0:this.currentPhase++},Battle.prototype.turnPhase=function(){return this.phases[this.currentPhase]},Battle.prototype.advanceTurn=function(){var a=this.rosters.length;this.currentTurn==a?this.currentTurn=1:this.currentTurn++};var testCharacter1=new Character(1,"Rupert","Human",1,100,50,25,9,7,4,5,3,0,0),testCharacter2=new Character(2,"Ignatius","Human",1,100,50,25,7,9,4,5,5,0,0),testRoster=new Roster(1,[testCharacter1,testCharacter2]),testBattle=new Battle(new BattleBoard(10,10),[testRoster]);testBattle.board.placeCharacter(testCharacter1),testBattle.board.moveCharacter(testCharacter1,2,3);var boardHTML=testBattle.board.generateHTML();addElement(boardHTML,"battleBoard","output");